var Ce=Object.defineProperty;var ue=e=>{throw TypeError(e)};var Fe=(e,t,i)=>t in e?Ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var w=(e,t,i)=>Fe(e,typeof t!="symbol"?t+"":t,i),ae=(e,t,i)=>t.has(e)||ue("Cannot "+i);var _=(e,t,i)=>(ae(e,t,"read from private field"),i?i.call(e):t.get(e)),F=(e,t,i)=>t.has(e)?ue("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i),C=(e,t,i,s)=>(ae(e,t,"write to private field"),s?s.call(e,i):t.set(e,i),i),b=(e,t,i)=>(ae(e,t,"access private method"),i);import{w as Ue}from"./with-props-BEBgiHH2.js";import{o as g,q as Ve,a as N,s as Ne}from"./chunk-DQRVZFIR-nU93BOcs.js";import{S as Le,a as ze}from"./ScrambleText-BZCG41U3.js";var De=1e-6,S=typeof Float32Array<"u"?Float32Array:Array;function je(){var e=new S(9);return S!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function U(){var e=new S(16);return S!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Be(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ve(e,t){var i=t[0],s=t[1],r=t[2],a=t[3],n=t[4],o=t[5],c=t[6],l=t[7],h=t[8],d=t[9],f=t[10],m=t[11],p=t[12],A=t[13],u=t[14],E=t[15],R=i*o-s*n,y=i*c-r*n,P=i*l-a*n,v=s*c-r*o,x=s*l-a*o,I=r*l-a*c,Y=h*A-d*p,q=h*u-f*p,G=h*E-m*p,H=d*u-f*A,$=d*E-m*A,W=f*E-m*u,M=R*W-y*$+P*H+v*G-x*q+I*Y;return M?(M=1/M,e[0]=(o*W-c*$+l*H)*M,e[1]=(r*$-s*W-a*H)*M,e[2]=(A*I-u*x+E*v)*M,e[3]=(f*x-d*I-m*v)*M,e[4]=(c*G-n*W-l*q)*M,e[5]=(i*W-r*G+a*q)*M,e[6]=(u*P-p*I-E*y)*M,e[7]=(h*I-f*P+m*y)*M,e[8]=(n*$-o*G+l*Y)*M,e[9]=(s*G-i*$-a*Y)*M,e[10]=(p*x-A*P+E*R)*M,e[11]=(d*P-h*x-m*R)*M,e[12]=(o*q-n*H-c*Y)*M,e[13]=(i*H-s*q+r*Y)*M,e[14]=(A*y-p*v-u*R)*M,e[15]=(h*v-d*y+f*R)*M,e):null}function se(e,t,i){var s=t[0],r=t[1],a=t[2],n=t[3],o=t[4],c=t[5],l=t[6],h=t[7],d=t[8],f=t[9],m=t[10],p=t[11],A=t[12],u=t[13],E=t[14],R=t[15],y=i[0],P=i[1],v=i[2],x=i[3];return e[0]=y*s+P*o+v*d+x*A,e[1]=y*r+P*c+v*f+x*u,e[2]=y*a+P*l+v*m+x*E,e[3]=y*n+P*h+v*p+x*R,y=i[4],P=i[5],v=i[6],x=i[7],e[4]=y*s+P*o+v*d+x*A,e[5]=y*r+P*c+v*f+x*u,e[6]=y*a+P*l+v*m+x*E,e[7]=y*n+P*h+v*p+x*R,y=i[8],P=i[9],v=i[10],x=i[11],e[8]=y*s+P*o+v*d+x*A,e[9]=y*r+P*c+v*f+x*u,e[10]=y*a+P*l+v*m+x*E,e[11]=y*n+P*h+v*p+x*R,y=i[12],P=i[13],v=i[14],x=i[15],e[12]=y*s+P*o+v*d+x*A,e[13]=y*r+P*c+v*f+x*u,e[14]=y*a+P*l+v*m+x*E,e[15]=y*n+P*h+v*p+x*R,e}function pe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function ke(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Oe(e,t,i,s,r){var a=1/Math.tan(t/2);if(e[0]=a/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,r!=null&&r!==1/0){var n=1/(s-r);e[10]=(r+s)*n,e[14]=2*r*s*n}else e[10]=-1,e[14]=-2*s;return e}var Ye=Oe;function xe(e,t,i,s){var r=t[0],a=t[1],n=t[2],o=s[0],c=s[1],l=s[2],h=r-i[0],d=a-i[1],f=n-i[2],m=h*h+d*d+f*f;m>0&&(m=1/Math.sqrt(m),h*=m,d*=m,f*=m);var p=c*f-l*d,A=l*h-o*f,u=o*d-c*h;return m=p*p+A*A+u*u,m>0&&(m=1/Math.sqrt(m),p*=m,A*=m,u*=m),e[0]=p,e[1]=A,e[2]=u,e[3]=0,e[4]=d*u-f*A,e[5]=f*p-h*u,e[6]=h*A-d*p,e[7]=0,e[8]=h,e[9]=d,e[10]=f,e[11]=0,e[12]=r,e[13]=a,e[14]=n,e[15]=1,e}function V(){var e=new S(3);return S!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function qe(e){var t=e[0],i=e[1],s=e[2];return Math.sqrt(t*t+i*i+s*s)}function D(e,t,i){var s=new S(3);return s[0]=e,s[1]=t,s[2]=i,s}function Ge(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function He(e,t){var i=t[0]-e[0],s=t[1]-e[1],r=t[2]-e[2];return i*i+s*s+r*r}function $e(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function j(e,t){var i=t[0],s=t[1],r=t[2],a=i*i+s*s+r*r;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function me(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function re(e,t,i){var s=t[0],r=t[1],a=t[2],n=i[0],o=i[1],c=i[2];return e[0]=r*c-a*o,e[1]=a*n-s*c,e[2]=s*o-r*n,e}function oe(e,t,i){var s=i[0],r=i[1],a=i[2],n=i[3],o=t[0],c=t[1],l=t[2],h=r*l-a*c,d=a*o-s*l,f=s*c-r*o;return h=h+h,d=d+d,f=f+f,e[0]=o+n*h+r*f-a*d,e[1]=c+n*d+a*h-s*f,e[2]=l+n*f+s*d-r*h,e}var We=qe;(function(){var e=V();return function(t,i,s,r,a,n){var o,c;for(i||(i=3),s||(s=0),r?c=Math.min(r*i+s,t.length):c=t.length,o=s;o<c;o+=i)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],a(e,e,n),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2];return t}})();function Xe(){var e=new S(4);return S!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Qe(e,t){var i=t[0],s=t[1],r=t[2],a=t[3],n=i*i+s*s+r*r+a*a;return n>0&&(n=1/Math.sqrt(n)),e[0]=i*n,e[1]=s*n,e[2]=r*n,e[3]=a*n,e}(function(){var e=Xe();return function(t,i,s,r,a,n){var o,c;for(i||(i=4),s||(s=0),r?c=Math.min(r*i+s,t.length):c=t.length,o=s;o<c;o+=i)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],e[3]=t[o+3],a(e,e,n),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2],t[o+3]=e[3];return t}})();function L(){var e=new S(4);return S!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Pe(e,t,i){i=i*.5;var s=Math.sin(i);return e[0]=s*t[0],e[1]=s*t[1],e[2]=s*t[2],e[3]=Math.cos(i),e}function ge(e,t,i){var s=t[0],r=t[1],a=t[2],n=t[3],o=i[0],c=i[1],l=i[2],h=i[3];return e[0]=s*h+n*o+r*l-a*c,e[1]=r*h+n*c+a*o-s*l,e[2]=a*h+n*l+s*c-r*o,e[3]=n*h-s*o-r*c-a*l,e}function B(e,t,i,s){var r=t[0],a=t[1],n=t[2],o=t[3],c=i[0],l=i[1],h=i[2],d=i[3],f,m,p,A,u;return m=r*c+a*l+n*h+o*d,m<0&&(m=-m,c=-c,l=-l,h=-h,d=-d),1-m>De?(f=Math.acos(m),p=Math.sin(f),A=Math.sin((1-s)*f)/p,u=Math.sin(s*f)/p):(A=1-s,u=s),e[0]=A*r+u*c,e[1]=A*a+u*l,e[2]=A*n+u*h,e[3]=A*o+u*d,e}function Ke(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Ze(e,t){var i=t[0]+t[4]+t[8],s;if(i>0)s=Math.sqrt(i+1),e[3]=.5*s,s=.5/s,e[0]=(t[5]-t[7])*s,e[1]=(t[6]-t[2])*s,e[2]=(t[1]-t[3])*s;else{var r=0;t[4]>t[0]&&(r=1),t[8]>t[r*3+r]&&(r=2);var a=(r+1)%3,n=(r+2)%3;s=Math.sqrt(t[r*3+r]-t[a*3+a]-t[n*3+n]+1),e[r]=.5*s,s=.5/s,e[3]=(t[a*3+n]-t[n*3+a])*s,e[a]=(t[a*3+r]+t[r*3+a])*s,e[n]=(t[n*3+r]+t[r*3+n])*s}return e}var ne=Qe;(function(){var e=V(),t=D(1,0,0),i=D(0,1,0);return function(s,r,a){var n=me(r,a);return n<-.999999?(re(e,t,r),We(e)<1e-6&&re(e,i,r),j(e,e),Pe(s,e,Math.PI),s):n>.999999?(s[0]=0,s[1]=0,s[2]=0,s[3]=1,s):(re(e,r,a),s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=1+n,ne(s,s))}})();(function(){var e=L(),t=L();return function(i,s,r,a,n,o){return B(e,s,n,o),B(t,r,a,o),B(i,e,t,2*o*(1-o)),i}})();(function(){var e=je();return function(t,i,s,r){return e[0]=s[0],e[3]=s[1],e[6]=s[2],e[1]=r[0],e[4]=r[1],e[7]=r[2],e[2]=-i[0],e[5]=-i[1],e[8]=-i[2],ne(t,Ze(t,e))}})();function k(){var e=new S(2);return S!=Float32Array&&(e[0]=0,e[1]=0),e}function Je(e){var t=new S(2);return t[0]=e[0],t[1]=e[1],t}function et(e,t){var i=new S(2);return i[0]=e,i[1]=t,i}function Ae(e,t){return e[0]=t[0],e[1]=t[1],e}function ce(e,t,i){return e[0]=t,e[1]=i,e}function tt(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function it(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function st(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function rt(e){var t=e[0],i=e[1];return t*t+i*i}var nt=it,at=rt;(function(){var e=k();return function(t,i,s,r,a,n){var o,c;for(i||(i=2),s||(s=0),r?c=Math.min(r*i+s,t.length):c=t.length,o=s;o<c;o+=i)e[0]=t[o],e[1]=t[o+1],a(e,e,n),t[o]=e[0],t[o+1]=e[1];return t}})();class ot{constructor(){this.metrics={frameCount:0,lastFpsCheck:0,averageFps:60,memoryUsage:0,isLowPerformance:!1},this.thresholds={lowFpsThreshold:45,highFpsThreshold:55,memoryThreshold:100*1024*1024}}updateFPS(t){if(this.metrics.frameCount++,t-this.metrics.lastFpsCheck>1e3){this.metrics.averageFps=this.metrics.frameCount,this.metrics.frameCount=0,this.metrics.lastFpsCheck=t;const i=this.metrics.isLowPerformance;return this.metrics.isLowPerformance=this.metrics.averageFps<this.thresholds.lowFpsThreshold,this.metrics.isLowPerformance&&!i?console.warn("Performance degradation detected. FPS:",this.metrics.averageFps):!this.metrics.isLowPerformance&&i&&console.log("Performance restored. FPS:",this.metrics.averageFps),!0}return!1}checkMemoryUsage(){return performance.memory&&(this.metrics.memoryUsage=performance.memory.usedJSHeapSize,this.metrics.memoryUsage>this.thresholds.memoryThreshold)?(console.warn("High memory usage detected:",Math.round(this.metrics.memoryUsage/1024/1024)+"MB"),!0):!1}shouldSkipFrame(){return this.metrics.isLowPerformance&&this.metrics.frameCount%2===0}getRecommendedVideoUpdateInterval(){return this.metrics.isLowPerformance?1e3/20:1e3/30}getRecommendedTextureSize(){return this.metrics.averageFps>this.thresholds.highFpsThreshold&&!this.checkMemoryUsage()?512:256}}class ct{constructor(){this.isVisible=!document.hidden,this.callbacks=new Set,document.addEventListener("visibilitychange",()=>{this.isVisible=!document.hidden,this.callbacks.forEach(t=>t(this.isVisible))})}onVisibilityChange(t){return this.callbacks.add(t),()=>this.callbacks.delete(t)}}class lt{constructor(){this.resources=new Map,this.cleanupTasks=new Set}register(t,i,s){this.resources.set(t,i),s&&this.cleanupTasks.add({id:t,cleanup:s})}unregister(t){const i=Array.from(this.cleanupTasks).find(s=>s.id===t);i&&(i.cleanup(),this.cleanupTasks.delete(i)),this.resources.delete(t)}cleanup(){this.cleanupTasks.forEach(t=>{try{t.cleanup()}catch(i){console.warn("Error during cleanup:",i)}}),this.cleanupTasks.clear(),this.resources.clear()}}const ht=({progress:e=0})=>g.jsx("div",{className:"loading-screen",children:g.jsxs("div",{className:"loading-container",children:[g.jsx("svg",{className:"loading-spinner",viewBox:"0 0 58 58",xmlns:"http://www.w3.org/2000/svg",children:g.jsx("g",{fill:"none",fillRule:"evenodd",children:g.jsxs("g",{transform:"translate(2 1)",stroke:"currentColor",strokeWidth:"1.5",children:[g.jsx("circle",{cx:"42.601",cy:"11.462",r:"5",fillOpacity:"1",fill:"currentColor",children:g.jsx("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"1;0;0;0;0;0;0;0",calcMode:"linear",repeatCount:"indefinite"})}),g.jsx("circle",{cx:"49.063",cy:"27.063",r:"5",fillOpacity:"0",fill:"currentColor",children:g.jsx("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;1;0;0;0;0;0;0",calcMode:"linear",repeatCount:"indefinite"})}),g.jsx("circle",{cx:"42.601",cy:"42.663",r:"5",fillOpacity:"0",fill:"currentColor",children:g.jsx("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;0;1;0;0;0;0;0",calcMode:"linear",repeatCount:"indefinite"})}),g.jsx("circle",{cx:"27",cy:"49.125",r:"5",fillOpacity:"0",fill:"currentColor",children:g.jsx("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;0;0;1;0;0;0;0",calcMode:"linear",repeatCount:"indefinite"})}),g.jsx("circle",{cx:"11.399",cy:"42.663",r:"5",fillOpacity:"0",fill:"currentColor",children:g.jsx("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;0;0;0;1;0;0;0",calcMode:"linear",repeatCount:"indefinite"})}),g.jsx("circle",{cx:"4.938",cy:"27.063",r:"5",fillOpacity:"0",fill:"currentColor",children:g.jsx("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;0;0;0;0;1;0;0",calcMode:"linear",repeatCount:"indefinite"})}),g.jsx("circle",{cx:"11.399",cy:"11.462",r:"5",fillOpacity:"0",fill:"currentColor",children:g.jsx("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;0;0;0;0;0;1;0",calcMode:"linear",repeatCount:"indefinite"})}),g.jsx("circle",{cx:"27",cy:"5",r:"5",fillOpacity:"0",fill:"currentColor",children:g.jsx("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.3s",values:"0;0;0;0;0;0;0;1",calcMode:"linear",repeatCount:"indefinite"})})]})})}),g.jsx("p",{className:"loading-text",children:"Loading..."}),g.jsx("div",{className:"progress-bar",children:g.jsx("div",{className:"progress-fill",style:{width:`${Math.round(e)}%`}})}),g.jsxs("p",{className:"progress-text",children:[Math.round(e),"%"]})]})});async function wt(){try{const e=await fetch("/Portfolio/projects.json");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return{projects:await e.json()}}catch(e){return console.error("Failed to load projects:",e),{projects:[]}}}const dt=`#version 300 es

uniform mat4 uWorldMatrix;
uniform mat4 uViewMatrix;
uniform mat4 uProjectionMatrix;
uniform vec3 uCameraPosition;
uniform vec4 uRotationAxisVelocity;

in vec3 aModelPosition;
in vec3 aModelNormal;
in vec2 aModelUvs;
in mat4 aInstanceMatrix;

out vec2 vUvs;
out float vAlpha;
flat out int vInstanceId;

#define PI 3.141593

void main() {
    vec4 worldPosition = uWorldMatrix * aInstanceMatrix * vec4(aModelPosition, 1.);

    vec3 centerPos = (uWorldMatrix * aInstanceMatrix * vec4(0., 0., 0., 1.)).xyz;
    float radius = length(centerPos.xyz);

    if (gl_VertexID > 0) {
        vec3 rotationAxis = uRotationAxisVelocity.xyz;
        float rotationVelocity = min(.15, uRotationAxisVelocity.w * 15.);
        vec3 stretchDir = normalize(cross(centerPos, rotationAxis));
        vec3 relativeVertexPos = normalize(worldPosition.xyz - centerPos);
        float strength = dot(stretchDir, relativeVertexPos);
        float invAbsStrength = min(0., abs(strength) - 1.);
        strength = rotationVelocity * sign(strength) * abs(invAbsStrength * invAbsStrength * invAbsStrength + 1.);
        worldPosition.xyz += stretchDir * strength;
    }

    worldPosition.xyz = radius * normalize(worldPosition.xyz);

    gl_Position = uProjectionMatrix * uViewMatrix * worldPosition;

    vAlpha = smoothstep(0.5, 1., normalize(worldPosition.xyz).z) * .9 + .1;
    vUvs = aModelUvs;
    vInstanceId = gl_InstanceID;
}
`,ft=`#version 300 es
precision highp float;

uniform sampler2D uTex;
uniform int uItemCount;
uniform int uAtlasSize;

out vec4 outColor;

in vec2 vUvs;
in float vAlpha;
flat in int vInstanceId;

void main() {
    int itemIndex = vInstanceId % uItemCount;
    int cellsPerRow = uAtlasSize;
    int cellX = itemIndex % cellsPerRow;
    int cellY = itemIndex / cellsPerRow;
    vec2 cellSize = vec2(1.0) / vec2(float(cellsPerRow));
    vec2 cellOffset = vec2(float(cellX), float(cellY)) * cellSize;

    ivec2 texSize = textureSize(uTex, 0);
    float imageAspect = float(texSize.x) / float(texSize.y);
    float containerAspect = 1.0;
    
    float scale = max(imageAspect / containerAspect, 
                     containerAspect / imageAspect);
    
    vec2 st = vec2(vUvs.x, 1.0 - vUvs.y);
    st = (st - 0.5) * scale + 0.5;
    
    st = clamp(st, 0.0, 1.0);
    
    st = st * cellSize + cellOffset;
    
    outColor = texture(uTex, st);
    outColor.a *= vAlpha;
}
`;class X{constructor(t,i,s){this.a=t,this.b=i,this.c=s}}class mt{constructor(t,i,s){this.position=D(t,i,s),this.normal=V(),this.uv=k()}}class Ee{constructor(){this.vertices=[],this.faces=[]}addVertex(...t){for(let i=0;i<t.length;i+=3)this.vertices.push(new mt(t[i],t[i+1],t[i+2]));return this}addFace(...t){for(let i=0;i<t.length;i+=3)this.faces.push(new X(t[i],t[i+1],t[i+2]));return this}get lastVertex(){return this.vertices[this.vertices.length-1]}subdivide(t=1){const i={};let s=this.faces;for(let r=0;r<t;++r){const a=new Array(s.length*4);s.forEach((n,o)=>{const c=this.getMidPoint(n.a,n.b,i),l=this.getMidPoint(n.b,n.c,i),h=this.getMidPoint(n.c,n.a,i),d=o*4;a[d+0]=new X(n.a,c,h),a[d+1]=new X(n.b,l,c),a[d+2]=new X(n.c,h,l),a[d+3]=new X(c,l,h)}),s=a}return this.faces=s,this}spherize(t=1){return this.vertices.forEach(i=>{j(i.normal,i.position),Ge(i.position,i.normal,t)}),this}get data(){return{vertices:this.vertexData,indices:this.indexData,normals:this.normalData,uvs:this.uvData}}get vertexData(){return new Float32Array(this.vertices.flatMap(t=>Array.from(t.position)))}get normalData(){return new Float32Array(this.vertices.flatMap(t=>Array.from(t.normal)))}get uvData(){return new Float32Array(this.vertices.flatMap(t=>Array.from(t.uv)))}get indexData(){return new Uint16Array(this.faces.flatMap(t=>[t.a,t.b,t.c]))}getMidPoint(t,i,s){const r=t<i?`k_${i}_${t}`:`k_${t}_${i}`;if(Object.prototype.hasOwnProperty.call(s,r))return s[r];const a=this.vertices[t].position,n=this.vertices[i].position,o=this.vertices.length;return s[r]=o,this.addVertex((a[0]+n[0])*.5,(a[1]+n[1])*.5,(a[2]+n[2])*.5),o}}class ut extends Ee{constructor(){super();const t=Math.sqrt(5)*.5+.5;this.addVertex(-1,t,0,1,t,0,-1,-t,0,1,-t,0,0,-1,t,0,1,t,0,-1,-t,0,1,-t,t,0,-1,t,0,1,-t,0,-1,-t,0,1).addFace(0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1)}}class vt extends Ee{constructor(t=4,i=1){super(),t=Math.max(4,t);const s=2*Math.PI/t;this.addVertex(0,0,0),this.lastVertex.uv[0]=.5,this.lastVertex.uv[1]=.5;for(let r=0;r<t;++r){const a=Math.cos(s*r),n=Math.sin(s*r);this.addVertex(i*a,i*n,0),this.lastVertex.uv[0]=a*.5+.5,this.lastVertex.uv[1]=n*.5+.5,r>0&&this.addFace(0,r,r+1)}this.addFace(0,t,1)}}function pt(e,t,i,s){const r=e.createProgram();if([e.VERTEX_SHADER,e.FRAGMENT_SHADER].forEach((n,o)=>{const c=e.createShader(n);e.shaderSource(c,t[o]),e.compileShader(c),e.getShaderParameter(c,e.COMPILE_STATUS)?e.attachShader(r,c):(console.error(e.getShaderInfoLog(c)),e.deleteShader(c))}),s)for(const n in s)e.bindAttribLocation(r,s[n],n);return e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS)?r:(console.error(e.getProgramInfoLog(r)),e.deleteProgram(r),null)}function xt(e,t,i){const s=e.createVertexArray();e.bindVertexArray(s);for(const[r,a,n]of t)a!==-1&&(e.bindBuffer(e.ARRAY_BUFFER,r),e.enableVertexAttribArray(a),e.vertexAttribPointer(a,n,e.FLOAT,!1,0,0));if(i){const r=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),e.STATIC_DRAW)}return e.bindVertexArray(null),s}function gt(e){const t=Math.min(2,window.devicePixelRatio),i=Math.round(e.clientWidth*t),s=Math.round(e.clientHeight*t),r=e.width!==i||e.height!==s;return r&&(e.width=i,e.height=s),r}function ye(e,t,i){const s=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,t,i),e.bindBuffer(e.ARRAY_BUFFER,null),s}function At(e,t,i,s,r){const a=e.createTexture();return e.bindTexture(e.TEXTURE_2D,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,i),a}var Q,le;class yt{constructor(t,i){F(this,Q);w(this,"isPointerDown",!1);w(this,"orientation",L());w(this,"pointerRotation",L());w(this,"rotationVelocity",0);w(this,"rotationAxis",D(1,0,0));w(this,"snapDirection",D(0,0,-1));w(this,"snapTargetDirection");w(this,"EPSILON",.1);w(this,"IDENTITY_QUAT",L());this.canvas=t,this.updateCallback=i||(()=>null),this.pointerPos=k(),this.previousPointerPos=k(),this._rotationVelocity=0,this._combinedQuat=L(),t.addEventListener("pointerdown",s=>{ce(this.pointerPos,s.clientX,s.clientY),Ae(this.previousPointerPos,this.pointerPos),this.isPointerDown=!0}),t.addEventListener("pointerup",()=>{this.isPointerDown=!1}),t.addEventListener("pointerleave",()=>{this.isPointerDown=!1}),t.addEventListener("pointermove",s=>{this.isPointerDown&&ce(this.pointerPos,s.clientX,s.clientY)}),t.style.touchAction="none"}update(t,i=16){const s=t/i+1e-5;let r=s,a=L();if(this.isPointerDown){const f=.3*s,m=5/s,p=nt(k(),this.pointerPos,this.previousPointerPos);if(st(p,p,f),at(p)>this.EPSILON){tt(p,this.previousPointerPos,p);const A=b(this,Q,le).call(this,p),u=b(this,Q,le).call(this,this.previousPointerPos),E=j(V(),A),R=j(V(),u);Ae(this.previousPointerPos,p),r*=m,this.quatFromVectors(E,R,this.pointerRotation,r)}else B(this.pointerRotation,this.pointerRotation,this.IDENTITY_QUAT,f)}else{const f=.1*s;if(B(this.pointerRotation,this.pointerRotation,this.IDENTITY_QUAT,f),this.snapTargetDirection){const p=this.snapTargetDirection,A=this.snapDirection,u=He(p,A),E=Math.max(.1,1-u*10);r*=.2*E,this.quatFromVectors(p,A,a,r)}}const n=ge(L(),a,this.pointerRotation);this.orientation=ge(L(),n,this.orientation),ne(this.orientation,this.orientation);const o=.8*s;B(this._combinedQuat,this._combinedQuat,n,o),ne(this._combinedQuat,this._combinedQuat);const c=Math.acos(this._combinedQuat[3])*2,l=Math.sin(c/2);let h=0;l>1e-6&&(h=c/(2*Math.PI),this.rotationAxis[0]=this._combinedQuat[0]/l,this.rotationAxis[1]=this._combinedQuat[1]/l,this.rotationAxis[2]=this._combinedQuat[2]/l);const d=.5*s;this._rotationVelocity+=(h-this._rotationVelocity)*d,this.rotationVelocity=this._rotationVelocity/s,this.updateCallback(t)}quatFromVectors(t,i,s,r=1){const a=re(V(),t,i);j(a,a);const n=Math.max(-1,Math.min(1,me(t,i))),o=Math.acos(n)*r;return Pe(s,a,o),{q:s,axis:a,angle:o}}}Q=new WeakSet,le=function(t){const s=this.canvas.clientWidth,r=this.canvas.clientHeight,a=Math.max(s,r)-1,n=(2*t[0]-s-1)/a,o=(2*t[1]-r-1)/a;let c=0;const l=n*n+o*o,h=2*2;return l<=h/2?c=Math.sqrt(h-l):c=h/Math.sqrt(l),D(-n,o,c)};var K,O,Z,J,ee,te,ie,z,T,Te,Me,he,Re,Ie,we,de,fe,be,Se,_e;class Pt{constructor(t,i,s,r,a=null){F(this,T);w(this,"TARGET_FRAME_DURATION",1e3/60);w(this,"SPHERE_RADIUS",2);F(this,K,0);F(this,O,0);F(this,Z,0);F(this,J,0);F(this,ee,0);F(this,te,1e3/30);F(this,ie,!0);F(this,z,null);w(this,"camera",{matrix:U(),near:.1,far:40,fov:Math.PI/4,aspect:1,position:D(0,0,3),up:D(0,1,0),matrices:{view:U(),projection:U(),inversProjection:U()}});w(this,"nearestVertexIndex",null);w(this,"smoothRotationVelocity",0);w(this,"scaleFactor",1);w(this,"movementActive",!1);this.canvas=t,this.items=i||[],this.onActiveItemChange=s||(()=>{}),this.onMovementChange=r||(()=>{}),this.performanceMonitor=new ot,this.visibilityManager=new ct,this.resourceManager=new lt,this.visibilityManager.onVisibilityChange(n=>{this.setVisibility(n)}),b(this,T,Te).call(this,a)}resize(){this.viewportSize=ce(this.viewportSize||k(),this.canvas.clientWidth,this.canvas.clientHeight);const t=this.gl;gt(t.canvas)&&t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),b(this,T,fe).call(this,t)}run(t=0){if(this.performanceMonitor.updateFPS(t)&&C(this,te,this.performanceMonitor.getRecommendedVideoUpdateInterval()),this.performanceMonitor.shouldSkipFrame()){C(this,z,requestAnimationFrame(s=>this.run(s)));return}if(!_(this,ie)){C(this,z,requestAnimationFrame(s=>this.run(s)));return}C(this,O,Math.min(32,t-_(this,K))),C(this,K,t),C(this,Z,_(this,O)/this.TARGET_FRAME_DURATION),C(this,J,_(this,J)+_(this,Z)),b(this,T,Ie).call(this,_(this,O)),b(this,T,we).call(this),C(this,z,requestAnimationFrame(s=>this.run(s)))}dispose(){var t;if(_(this,z)&&(cancelAnimationFrame(_(this,z)),C(this,z,null)),this.resourceManager.cleanup(),this.gl){const i=this.gl;this.discProgram&&i.deleteProgram(this.discProgram),this.discVAO&&i.deleteVertexArray(this.discVAO),(t=this.discInstances)!=null&&t.buffer&&i.deleteBuffer(this.discInstances.buffer)}this.videos&&(this.videos.forEach(i=>{i&&i.tagName==="VIDEO"&&(i.src="",i.load())}),this.videos=[])}setVisibility(t){C(this,ie,t)}}K=new WeakMap,O=new WeakMap,Z=new WeakMap,J=new WeakMap,ee=new WeakMap,te=new WeakMap,ie=new WeakMap,z=new WeakMap,T=new WeakSet,Te=function(t){this.gl=this.canvas.getContext("webgl2",{antialias:!1,alpha:!1});const i=this.gl;if(!i)throw new Error("No WebGL 2 context!");this.viewportSize=et(this.canvas.clientWidth,this.canvas.clientHeight),this.drawBufferSize=Je(this.viewportSize),this.discProgram=pt(i,[dt,ft],null,{aModelPosition:0,aModelNormal:1,aModelUvs:2,aInstanceMatrix:3}),this.discLocations={aModelPosition:i.getAttribLocation(this.discProgram,"aModelPosition"),aModelUvs:i.getAttribLocation(this.discProgram,"aModelUvs"),aInstanceMatrix:i.getAttribLocation(this.discProgram,"aInstanceMatrix"),uWorldMatrix:i.getUniformLocation(this.discProgram,"uWorldMatrix"),uViewMatrix:i.getUniformLocation(this.discProgram,"uViewMatrix"),uProjectionMatrix:i.getUniformLocation(this.discProgram,"uProjectionMatrix"),uCameraPosition:i.getUniformLocation(this.discProgram,"uCameraPosition"),uScaleFactor:i.getUniformLocation(this.discProgram,"uScaleFactor"),uRotationAxisVelocity:i.getUniformLocation(this.discProgram,"uRotationAxisVelocity"),uTex:i.getUniformLocation(this.discProgram,"uTex"),uFrames:i.getUniformLocation(this.discProgram,"uFrames"),uItemCount:i.getUniformLocation(this.discProgram,"uItemCount"),uAtlasSize:i.getUniformLocation(this.discProgram,"uAtlasSize")},this.discGeo=new vt(56,1),this.discBuffers=this.discGeo.data,this.discVAO=xt(i,[[ye(i,this.discBuffers.vertices,i.STATIC_DRAW),this.discLocations.aModelPosition,3],[ye(i,this.discBuffers.uvs,i.STATIC_DRAW),this.discLocations.aModelUvs,2]],this.discBuffers.indices),this.icoGeo=new ut,this.icoGeo.subdivide(1).spherize(this.SPHERE_RADIUS),this.instancePositions=this.icoGeo.vertices.map(s=>s.position),this.DISC_INSTANCE_COUNT=this.icoGeo.vertices.length,b(this,T,Re).call(this,this.DISC_INSTANCE_COUNT),this.worldMatrix=U(),b(this,T,Me).call(this),this.control=new yt(this.canvas,s=>b(this,T,be).call(this,s)),b(this,T,de).call(this),b(this,T,fe).call(this,i),this.resize(),t&&t(this)},Me=function(){const t=this.gl,i=this.performanceMonitor.getRecommendedTextureSize(),s=t.getParameter(t.MAX_TEXTURE_SIZE),r=i>=512&&s>=4096;this.tex=At(t,r?t.LINEAR_MIPMAP_LINEAR:t.LINEAR,t.LINEAR,t.CLAMP_TO_EDGE,t.CLAMP_TO_EDGE);const a=Math.max(1,this.items.length);this.atlasSize=Math.ceil(Math.sqrt(a)),this.cellSize=i,this.videos=[],this.videoNeedsUpdate=new Array(a).fill(!0),this.videoCanvas=document.createElement("canvas"),this.videoCtx=this.videoCanvas.getContext("2d",{alpha:!1,willReadFrequently:!1,desynchronized:!0,powerPreference:"default"}),this.videoCanvas.width=this.atlasSize*this.cellSize,this.videoCanvas.height=this.atlasSize*this.cellSize,this.videoCtx.imageSmoothingEnabled=!0,this.videoCtx.imageSmoothingQuality=r?"high":"medium",this.textureNeedsUpdate=!1,this.resourceManager.register("texture",this.tex,()=>{this.gl&&this.tex&&this.gl.deleteTexture(this.tex)}),this.resourceManager.register("videoCanvas",this.videoCanvas,()=>{this.videoCanvas&&(this.videoCanvas.width=1,this.videoCanvas.height=1)}),console.log("Creating video texture with items:",this.items),Promise.all(this.items.map((n,o)=>new Promise(c=>{console.log(`Loading video ${o}:`,n.video);const l=document.createElement("video");l.crossOrigin="anonymous",l.muted=!0,l.playsInline=!0,l.loop=!0,l.autoplay=!0,l.preload="auto",l.setAttribute("playsinline","true"),l.setAttribute("webkit-playsinline","true"),l.style.imageRendering="high-quality",l.style.imageRendering="-webkit-optimize-contrast",l.style.imageRendering="crisp-edges",l.addEventListener("loadeddata",()=>{console.log(`Video loaded for item ${o}`),clearTimeout(h),l.playbackRate=1,l.volume=0;const d=l.play();d&&d.then(()=>{console.log(`Video playback started for item ${o}`),this.videoNeedsUpdate[o]=!0}).catch(f=>{console.log("Autoplay prevented:",f);const m=()=>{l.play().catch(()=>console.log("Retry play failed")),document.removeEventListener("click",m),document.removeEventListener("touchstart",m)};document.addEventListener("click",m,{once:!0}),document.addEventListener("touchstart",m,{once:!0})}),c(l)}),l.addEventListener("error",d=>{console.warn(`Video loading error for item ${o}:`,d);const f=document.createElement("canvas");f.width=512,f.height=512;const m=f.getContext("2d");m.fillStyle="#608B83",m.fillRect(0,0,512,512),f._isVideoFallback=!0,c(f)});const h=setTimeout(()=>{console.warn(`Video loading timeout for item ${o}`);const d=document.createElement("canvas");d.width=512,d.height=512;const f=d.getContext("2d");f.fillStyle="#608B83",f.fillRect(0,0,512,512),d._isVideoFallback=!0,c(d)},1e4);l.src=n.video,l.load()}))).then(n=>{console.log("All videos loaded:",n),this.videos=n,b(this,T,he).call(this,!0)}).catch(n=>{console.error("Error loading video textures:",n)})},he=function(t=!1){if(!this.videos||this.videos.length===0)return;const i=performance.now();if(!t&&i-_(this,ee)<_(this,te))return;let s=t;if(s||(s=this.videos.some((o,c)=>this.videoNeedsUpdate[c]&&o.videoWidth&&o.videoHeight&&!o.paused?o.currentTime!==(o._lastUpdateTime||0):!1)),!s&&!this.textureNeedsUpdate)return;C(this,ee,i);const r=this.gl,a=this.cellSize;let n=!1;this.videos.forEach((o,c)=>{const l=c%this.atlasSize*a,h=Math.floor(c/this.atlasSize)*a,d=o&&o.tagName==="VIDEO",f=o&&o.tagName==="CANVAS";if(!(!(t||this.videoNeedsUpdate[c]&&d&&o.currentTime!==(o._lastUpdateTime||0))&&!f&&!this.textureNeedsUpdate))try{d&&o.videoWidth&&o.videoHeight&&!o.paused?(this.videoCtx.clearRect(l,h,a,a),this.videoCtx.drawImage(o,l,h,a,a),o._lastUpdateTime=o.currentTime,n=!0):f&&o.width&&o.height?(this.videoCtx.clearRect(l,h,a,a),this.videoCtx.drawImage(o,l,h,a,a),n=!0):(this.textureNeedsUpdate||t)&&(this.videoCtx.fillStyle="#608B83",this.videoCtx.fillRect(l,h,a,a),n=!0)}catch{(this.textureNeedsUpdate||t)&&(this.videoCtx.fillStyle="#608B83",this.videoCtx.fillRect(l,h,a,a),n=!0)}}),n&&(r.bindTexture(r.TEXTURE_2D,this.tex),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,this.videoCanvas),(this.textureNeedsUpdate||this.performanceMonitor.metrics.frameCount%30===0)&&r.generateMipmap(r.TEXTURE_2D),this.textureNeedsUpdate=!1)},Re=function(t){const i=this.gl;this.discInstances={matricesArray:new Float32Array(t*16),matrices:[],buffer:i.createBuffer()};for(let a=0;a<t;++a){const n=new Float32Array(this.discInstances.matricesArray.buffer,a*16*4,16);n.set(U()),this.discInstances.matrices.push(n)}i.bindVertexArray(this.discVAO),i.bindBuffer(i.ARRAY_BUFFER,this.discInstances.buffer),i.bufferData(i.ARRAY_BUFFER,this.discInstances.matricesArray.byteLength,i.DYNAMIC_DRAW);const s=4,r=16*4;for(let a=0;a<s;++a){const n=this.discLocations.aInstanceMatrix+a;i.enableVertexAttribArray(n),i.vertexAttribPointer(n,4,i.FLOAT,!1,r,a*4*4),i.vertexAttribDivisor(n,1)}i.bindBuffer(i.ARRAY_BUFFER,null),i.bindVertexArray(null)},Ie=function(t){const i=this.gl;this.control.update(t,this.TARGET_FRAME_DURATION),b(this,T,he).call(this);let s=this.instancePositions.map(n=>oe(V(),n,this.control.orientation));const r=.25,a=.6;s.forEach((n,o)=>{const l=(Math.abs(n[2])/this.SPHERE_RADIUS*a+(1-a))*r,h=U();se(h,h,pe(U(),$e(V(),n))),se(h,h,xe(U(),[0,0,0],n,[0,1,0])),se(h,h,ke(U(),[l,l,l])),se(h,h,pe(U(),[0,0,-this.SPHERE_RADIUS])),Be(this.discInstances.matrices[o],h)}),i.bindBuffer(i.ARRAY_BUFFER,this.discInstances.buffer),i.bufferSubData(i.ARRAY_BUFFER,0,this.discInstances.matricesArray),i.bindBuffer(i.ARRAY_BUFFER,null),this.smoothRotationVelocity=this.control.rotationVelocity},we=function(){const t=this.gl;t.useProgram(this.discProgram),t.enable(t.CULL_FACE),t.enable(t.DEPTH_TEST),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.uniformMatrix4fv(this.discLocations.uWorldMatrix,!1,this.worldMatrix),t.uniformMatrix4fv(this.discLocations.uViewMatrix,!1,this.camera.matrices.view),t.uniformMatrix4fv(this.discLocations.uProjectionMatrix,!1,this.camera.matrices.projection),t.uniform3f(this.discLocations.uCameraPosition,this.camera.position[0],this.camera.position[1],this.camera.position[2]),t.uniform4f(this.discLocations.uRotationAxisVelocity,this.control.rotationAxis[0],this.control.rotationAxis[1],this.control.rotationAxis[2],this.smoothRotationVelocity*1.1),t.uniform1i(this.discLocations.uItemCount,this.items.length),t.uniform1i(this.discLocations.uAtlasSize,this.atlasSize),t.uniform1f(this.discLocations.uFrames,_(this,J)),t.uniform1f(this.discLocations.uScaleFactor,this.scaleFactor),t.uniform1i(this.discLocations.uTex,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.tex),t.bindVertexArray(this.discVAO),t.drawElementsInstanced(t.TRIANGLES,this.discBuffers.indices.length,t.UNSIGNED_SHORT,0,this.DISC_INSTANCE_COUNT)},de=function(){xe(this.camera.matrix,this.camera.position,[0,0,0],this.camera.up),ve(this.camera.matrices.view,this.camera.matrix)},fe=function(t){this.camera.aspect=t.canvas.clientWidth/t.canvas.clientHeight;const i=this.SPHERE_RADIUS*.35,s=this.camera.position[2];this.camera.aspect>1?this.camera.fov=2*Math.atan(i/s):this.camera.fov=2*Math.atan(i/this.camera.aspect/s),Ye(this.camera.matrices.projection,this.camera.fov,this.camera.aspect,this.camera.near,this.camera.far),ve(this.camera.matrices.inversProjection,this.camera.matrices.projection)},be=function(t){const i=t/this.TARGET_FRAME_DURATION+1e-4;let s=5/i,r=3;const a=this.control.isPointerDown||Math.abs(this.smoothRotationVelocity)>.01;if(a!==this.movementActive&&(this.movementActive=a,this.onMovementChange(a)),this.control.isPointerDown)r+=this.control.rotationVelocity*80+2.5,s=7/i;else{const n=b(this,T,Se).call(this),o=n%Math.max(1,this.items.length);this.onActiveItemChange(o);const c=j(V(),b(this,T,_e).call(this,n));this.control.snapTargetDirection=c}this.camera.position[2]+=(r-this.camera.position[2])/s,b(this,T,de).call(this)},Se=function(){const t=this.control.snapDirection,i=Ke(L(),this.control.orientation),s=oe(V(),t,i);let r=-1,a;for(let n=0;n<this.instancePositions.length;++n){const o=me(s,this.instancePositions[n]);o>r&&(r=o,a=n)}return a},_e=function(t){const i=this.instancePositions[t];return oe(V(),i,this.control.orientation)};const Et=[{image:"https://picsum.photos/900/900?grayscale",link:"https://google.com/",title:"",description:""}],bt=Ue(function(){const t=Ve(),i=N.useMemo(()=>(t==null?void 0:t.projects)||[],[t==null?void 0:t.projects]),s=N.useRef(null),r=N.useRef(null),a=Ne(),[n,o]=N.useState(null),[c,l]=N.useState(!1),[h,d]=N.useState(!0),[f,m]=N.useState(0),p=(u,E)=>new Promise(R=>{const y=u.length*2;let P=0;const v=()=>{P++;const x=P/y*100;E(x),P>=y&&R()};u.forEach(x=>{if(x.video){const I=document.createElement("video");I.crossOrigin="anonymous",I.muted=!0,I.preload="metadata",I.addEventListener("loadedmetadata",v,{once:!0}),I.addEventListener("error",v,{once:!0}),I.src=x.video}else v();if(x.image){const I=new Image;I.crossOrigin="anonymous",I.addEventListener("load",v,{once:!0}),I.addEventListener("error",v,{once:!0}),I.src=x.image}else v()}),setTimeout(()=>{R()},15e3)});N.useEffect(()=>{const u=async()=>{try{await p(i,m),setTimeout(()=>{d(!1),setTimeout(()=>{ze({duration:.8,delay:0,selectors:["h1","h2","h3","h4","h5","h6","p","span","a","button",".title",".japanese",".status",".info__title",".info__description",".project-title",".project-year",".project-class",".back-button",".external-link",".face-title",".action-button"],excludeSelectors:[".loading",".loading-screen *",".class__name",".year__number",".class",".name",".face-title *",".action-button *"]})},200)},500)}catch(E){console.error("Failed to fetch projects:",E),d(!1)}};i.length>0?u():d(!1)},[i]),N.useEffect(()=>{const u=s.current;let E;const R=v=>{const x=v%i.length;o(i[x])};u&&!h&&(E=new Pt(u,i.length?i:Et,R,l,v=>{r.current=v,v.run()}));const y=()=>{E&&E.resize()},P=()=>{E&&E.setVisibility(!document.hidden)};return window.addEventListener("resize",y),document.addEventListener("visibilitychange",P),y(),()=>{window.removeEventListener("resize",y),document.removeEventListener("visibilitychange",P),E&&E.dispose(),r.current=null}},[i,h]),N.useEffect(()=>()=>{r.current&&r.current.dispose()},[]);const A=()=>{if(!n)return;const u=i.findIndex(E=>E.title===n.title);u!==-1?a(`/Portfolio/project/${u}`):n.link&&(n.link.startsWith("http")?window.open(n.link,"_blank"):console.log("Internal route:",n.link))};return g.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",zIndex:5},children:[h&&g.jsx(ht,{progress:f}),g.jsx("canvas",{id:"infinite-grid-menu-canvas",ref:s}),n&&!h&&g.jsxs(g.Fragment,{children:[g.jsx("h2",{className:`face-title ${c?"inactive":"active"}`,children:g.jsx("div",{children:n.title})}),g.jsx(Le,{onClick:A,className:`action-button ${c?"inactive":"active"}`,children:"View Project"})]})]})});export{wt as clientLoader,bt as default};
